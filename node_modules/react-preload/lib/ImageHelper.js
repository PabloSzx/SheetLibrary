'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _ImageCache = require('./ImageCache');

var _ImageCache2 = _interopRequireDefault(_ImageCache);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ImageHelper = {
    loadImage: function loadImage(url, options) {
        var image = _ImageCache2.default.get(url, options);

        return new Promise(function (resolve, reject) {
            var handleSuccess = function handleSuccess() {
                resolve(image);
            };
            var handleError = function handleError() {
                reject(image);
            };

            if (image.complete) {
                // image is loaded, go ahead and change the state

                if (image.naturalWidth && image.naturalHeight) {
                    // successful load
                    handleSuccess();
                } else {
                    handleError();
                }
            } else {
                image.addEventListener('load', handleSuccess, false);
                image.addEventListener('error', handleError, false);
            }
        });
    },
    loadImages: function loadImages(urls, options) {
        var _this = this;

        var promises = urls.map(function (url) {
            return _this.loadImage(url, options);
        });
        return Promise.all(promises);
    },


    // preload without caring about the result
    stuffImages: function stuffImages(urls, options) {
        _ImageCache2.default.stuff(urls, options);
    }
};

exports.default = ImageHelper;